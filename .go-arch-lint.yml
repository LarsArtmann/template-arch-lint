# üî• ENTERPRISE-GRADE GO ARCHITECTURE ENFORCEMENT TEMPLATE
# MAXIMUM STRICTNESS - Domain-Driven Design & Clean Architecture
#
# This configuration demonstrates strict architectural boundaries
# Customize components and dependencies for your specific project structure
#
# Features:
# - ‚úÖ Domain isolation (zero infrastructure dependencies)
# - ‚úÖ Application layer mediates between domain and infrastructure  
# - ‚úÖ Infrastructure abstractions via interfaces
# - ‚úÖ Clear dependency flow: Infrastructure ‚Üí Application ‚Üí Domain

version: 3
workdir: .

# üö® VENDOR DEPENDENCY CONFIGURATION
allow:
  depOnAnyVendor: true  # Allow vendor dependencies (set to false for stricter control)

# üì¶ ARCHITECTURAL COMPONENTS
# Define your project's architectural layers and boundaries
components:
  # ========================================
  # DOMAIN LAYER - Pure Business Logic
  # ========================================
  domain-entities:
    in: internal/domain/entities/**
  domain-shared:
    in: internal/domain/shared/**
  domain-values:
    in: internal/domain/values/**
  domain-errors:
    in: internal/domain/errors/**
  domain-repositories:
    in: internal/domain/repositories/**
  domain-services:
    in: internal/domain/services/**
  
  # ========================================  
  # APPLICATION LAYER - Use Cases & Coordination
  # ========================================
  app-handlers:
    in: internal/application/handlers/**
  app-middleware:
    in: internal/application/middleware/**
    
  # ========================================
  # INFRASTRUCTURE LAYER - External Concerns
  # ========================================
  infrastructure:
    in: internal/infrastructure/**
    
  # ========================================
  # DATA ACCESS & PERSISTENCE
  # ========================================
  database:
    in: internal/db/**
    
  # ========================================
  # OBSERVABILITY & MONITORING
  # ========================================
  observability:
    in: internal/observability/**
    
  # ========================================
  # WEB LAYER - Templates & Static Assets
  # ========================================
  web-templates-components:
    in: web/templates/components/**
  web-templates-layouts:
    in: web/templates/layouts/**
  web-templates-pages:
    in: web/templates/pages/**
  web-static:
    in: web/static/**
    
  # ========================================
  # CONFIGURATION & STARTUP
  # ========================================
  config:
    in: internal/config/**
  container:
    in: internal/container/**
  main:
    in: cmd/**
    
  # ========================================
  # EXAMPLES & UTILITIES
  # ========================================
  examples:
    in: example/**

# üîí DEPENDENCY RULES - Enforce Clean Architecture
deps:
  # DOMAIN LAYER - Zero infrastructure dependencies
  domain-entities:
    anyVendorDeps: true
    mayDependOn:
      - domain-shared
      - domain-values
      - domain-errors
  
  domain-shared:
    anyVendorDeps: true
    mayDependOn: []
    
  domain-values:
    anyVendorDeps: true
    mayDependOn:
      - domain-shared
      - domain-errors
      
  domain-errors:
    anyVendorDeps: true
    mayDependOn:
      - domain-shared
      
  domain-repositories:
    anyVendorDeps: true
    mayDependOn:
      - domain-entities
      - domain-shared
      - domain-values
      - domain-errors
      
  domain-services:
    anyVendorDeps: true
    mayDependOn:
      - domain-entities
      - domain-repositories
      - domain-shared
      - domain-values
      - domain-errors
  
  # APPLICATION LAYER - Orchestrates domain and infrastructure
  app-handlers:
    mayDependOn:
      - domain-entities
      - domain-services
      - domain-repositories
      - domain-shared
      - domain-values
      - domain-errors
      - web-templates-components
      - web-templates-layouts
      - web-templates-pages
      
  app-middleware:
    mayDependOn:
      - domain-shared
      - domain-errors
      - observability
  
  # INFRASTRUCTURE LAYER - External integrations
  infrastructure:
    mayDependOn:
      - domain-entities
      - domain-repositories
      - domain-shared
      - domain-values
      - domain-errors
      - database
      
  # DATA ACCESS & PERSISTENCE
  database:
    anyVendorDeps: true
    mayDependOn:
      - domain-entities
      - domain-shared
      - domain-values
      - domain-errors
      
  # OBSERVABILITY & MONITORING
  observability:
    anyVendorDeps: true
    mayDependOn:
      - domain-shared
      - domain-errors
      - domain-entities
      - config
      
  # WEB LAYER - Templates & Static Assets
  web-templates-components:
    anyVendorDeps: true
    mayDependOn:
      - domain-entities
      - domain-shared
      - domain-values
      
  web-templates-layouts:
    anyVendorDeps: true
    mayDependOn:
      - domain-entities
      - domain-shared
      - domain-values
      
  web-templates-pages:
    anyVendorDeps: true
    mayDependOn:
      - domain-entities
      - domain-shared
      - domain-values
      - web-templates-components
      - web-templates-layouts
      
  web-static:
    anyVendorDeps: true
    mayDependOn: []
  
  # CONFIGURATION & STARTUP
  config:
    anyVendorDeps: true
    mayDependOn: []
    
  container:
    anyProjectDeps: true
    
  main:
    anyProjectDeps: true

  # EXAMPLES - Can use any layer for demonstrations
  examples:
    anyProjectDeps: true

# üåç COMMON COMPONENTS - Available everywhere
commonComponents:
  - domain-shared
  - domain-errors

# üö´ EXCLUSION PATTERNS
exclude:
  # Generated and temporary files
  - "**/*.pb.go"
  - "**/*_generated.go" 
  - "**/*_gen.go"
  - "**/*_templ.go"
  - "**/mock_*.go"
  
  # Test files and directories
  - "**/*_test.go"
  - "*_test.go"
  - "integration_test.go"
  - "**/testdata/**"
  - "**/test/**"
  - "**/tests/**"
  - "test/**"
  - "integration-test/**"
  - "**/integration-test/**"
  
  # Build and vendor
  - "**/vendor/**"
  - "**/bin/**" 
  - "**/build/**"
  - "**/dist/**"
  - "**/node_modules/**"
  
  # Documentation and configuration
  - "**/docs/**"
  - "**/examples/**" 
  - "**/*.md"
  - "**/.git/**"
  - "**/.github/**"
  
  # IDE and editor files
  - "**/.vscode/**"
  - "**/.idea/**"
  - "**/*.swp"
  - "**/.DS_Store"

# üìã ARCHITECTURE VALIDATION RULES
#
# This configuration enforces:
#
# 1. DOMAIN ISOLATION
#    - Domain entities cannot import infrastructure
#    - Domain shared cannot import anything from project
#    - Business logic stays pure and testable
#
# 2. DEPENDENCY INVERSION
#    - Application layer defines interfaces
#    - Infrastructure implements those interfaces
#    - Domain depends on abstractions, not concretions
#
# 3. CLEAN ARCHITECTURE FLOW
#    - Infrastructure ‚Üí Application ‚Üí Domain
#    - Each layer can only depend on inner layers
#    - No circular dependencies allowed
#
# 4. SHARED KERNEL
#    - Common types and utilities available everywhere
#    - Keeps shared concepts consistent across layers
#
# To customize for your project:
# 1. Update component paths to match your directory structure
# 2. Add/remove components as needed
# 3. Adjust dependency rules for your architecture
# 4. Set depOnAnyVendor to false for stricter vendor control